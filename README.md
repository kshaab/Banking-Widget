# Banking Widget

## –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ üìö

- [–û –ø—Ä–æ–µ–∫—Ç–µ](#–æ-–ø—Ä–æ–µ–∫—Ç–µ)
- [–°—Ç–∞—Ç—É—Å –ø—Ä–æ–µ–∫—Ç–∞](#—Å—Ç–∞—Ç—É—Å-–ø—Ä–æ–µ–∫—Ç–∞)
- [–°—Ç–µ–∫ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π](#—Å—Ç–µ–∫-—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π)
- [–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞](#—Å—Ç—Ä—É–∫—Ç—É—Ä–∞-–ø—Ä–æ–µ–∫—Ç–∞)
- [–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ](#–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ)
- [–û—Å–Ω–æ–≤–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª](#–æ—Å–Ω–æ–≤–Ω–æ–π-—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª)
- [–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏](#–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏)
- [–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ](#—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ)
- [–ê–≤—Ç–æ—Ä](#–∞–≤—Ç–æ—Ä)
- [–õ–∏—Ü–µ–Ω–∑–∏—è](#–ª–∏—Ü–µ–Ω–∑–∏—è)

## –û –ø—Ä–æ–µ–∫—Ç–µ
**Banking Widget** ‚Äî —É—á–µ–±–Ω—ã–π –ø—Ä–æ–µ–∫—Ç –Ω–∞ Python –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π, –∫–æ—Ç–æ—Ä—ã–µ –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ Excel-—Ñ–∞–π–ª–µ. –ü—Ä–æ–µ–∫—Ç –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç —Ä–∞–±–æ—Ç—É —Å –¥–∞–Ω–Ω—ã–º–∏, –º–∞—Å–∫–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏, —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—é, —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫—É –∏ –∞–Ω–∞–ª–∏–∑ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π.

**–û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:**
- –ú–∞—Å–∫–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–æ–º–µ—Ä–æ–≤ –∫–∞—Ä—Ç –∏ —Å—á–µ—Ç–æ–≤
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –∏ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –æ–ø–µ—Ä–∞—Ü–∏–π
- –†–∞–±–æ—Ç–∞ —Å JSON / CSV / Excel
- –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä—ã –∏ –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä—ã
- –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –≤–∞–ª—é—Ç —á–µ—Ä–µ–∑ API
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å –ø–æ–º–æ—â—å—é pytest

## –°—Ç–∞—Ç—É—Å –ø—Ä–æ–µ–∫—Ç–∞ 
‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω 

üéì –£—á–µ–±–Ω—ã–π –ø—Ä–æ–µ–∫—Ç

## –°—Ç–µ–∫ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π
- Python 3.10+
- Poetry
- Pytest
- JSON / CSV / Excel
- REST API

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
src/
  
     ‚îú‚îÄ masks/
     ‚îú‚îÄ widget/     
     ‚îú‚îÄ processing/     
     ‚îú‚îÄ generators/     
     ‚îú‚îÄ decorators/    
     ‚îú‚îÄ utils/     
     ‚îú‚îÄ external_api/    
     ‚îú‚îÄ read_transactions/   
     ‚îî‚îÄ actions_with_bank_operations.py
 
tests/

main.py

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è: 
```bash
git clone https://github.com/kshaab/Banking-Widget
cd widget_project
```
2. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –∏ –∞–∫—Ç–∏–≤–∞—Ü–∏—è –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è:
```bash
poetry install
poetry shell
```
3. –ó–∞–ø—É—Å–∫ —Ñ–∞–π–ª–∞:
```bash 
python src/main.py
```

## –û—Å–Ω–æ–≤–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª

### üî∏ Masks

`get_mask_card_number(card_number)`

–ú–∞—Å–∫–∏—Ä—É–µ—Ç –Ω–æ–º–µ—Ä  –±–∞–Ω–∫–æ–≤—Å–∫–æ–π –∫–∞—Ä—Ç—ã.

```python
>>> get_mask_card_number("7000792289606361")
"7000 79** **** 6361"
```

 `get_mask_account(account)` 
 
 –ú–∞—Å–∫–∏—Ä—É–µ—Ç –Ω–æ–º–µ—Ä —Å—á–µ—Ç–∞.
 
```python
>>> get_mask_account("73654108430135874305")
"**4305"
```

### üî∏ Widget

`mask_account_card(info)` 

–ú–∞—Å–∫–∏—Ä—É–µ—Ç –Ω–æ–º–µ—Ä –∫–∞—Ä—Ç—ã, —Å–æ—Ö—Ä–∞–Ω—è—è –µ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ.

```python
>>> mask_account_card("Visa Platinum 7000792289606361")
"Visa Platinum 7000 79** **** 6361"
```

`get_date(date_str)` 

–ü—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç —Ñ–æ—Ä–º–∞—Ç –¥–∞—Ç—ã.

```python
>>> get_date("2024-03-11T02:26:18.671407")
"11.03.2024"
```

### üî∏ Processing

`filter_by_state(data, state)` 

–§–∏–ª—å—Ç—Ä—É–µ—Ç —Å–ø–∏—Å–æ–∫ —Å–ª–æ–≤–∞—Ä–µ–π –ø–æ –∫–ª—é—á—É.

```python
filter_by_state(data, state="CANCELED")
```

`sort_by_date(info, reverse)` 
–°–æ—Ä—Ç–∏—Ä—É–µ—Ç —Å–ø–∏—Å–æ–∫ —Å–ª–æ–≤–∞—Ä–µ–π –ø–æ –¥–∞—Ç–µ –≤ –ø–æ—Ä—è–¥–∫–µ –≤–æ–∑—Ä–∞—Å—Ç–∞–Ω–∏—è/—É–±—ã–≤–∞–Ω–∏—è. 

```python
sort_by_date(data, reverse=True)
```

### üî∏ Generators

`filter_by_currency(transactions, currency_code)`

–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∏—Ç–µ—Ä–∞—Ç–æ—Ä —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –ø–æ –≤–∞–ª—é—Ç–µ.

```python
filter_by_currency(transactions, "USD")
```

`transaction_descriptions(transactions)`

–ü–æ–æ—á–µ—Ä—ë–¥–Ω–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ–ø–∏—Å–∞–Ω–∏—è –æ–ø–µ—Ä–∞—Ü–∏–π.

```python
transaction_descriptions(transactions) 
```

`card_number_generator(start, stop)`

–ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –Ω–æ–º–µ—Ä–∞ –∫–∞—Ä—Ç –≤ –∑–∞–¥–∞–Ω–Ω–æ–º –¥–∏–∞–ø–∞–∑–æ–Ω–µ.

```python
for card_number in card_number_generator(1, 5)
```

### üî∏ Decorators 

`log(filename = None)`
–î–µ–∫–æ—Ä–∞—Ç–æ—Ä –¥–ª—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ —Ñ—É–Ω–∫—Ü–∏–π.

```python
@log(filename="mylog.txt")
def my_function():
    return 3

"my_function ok, result: 3."
```

### üî∏ Utils 

`get_transactions(file_path)`

–ó–∞–≥—Ä—É–∂–∞–µ—Ç —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –∏–∑ JSON-—Ñ–∞–π–ª–∞.

### üî∏ External API 

`convert_to_rub`

–ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç –≤–∞–ª—é—Ç—É –≤ —Ä—É–±–ª–∏ —á–µ—Ä–µ–∑ API.

`get_rub_amount(transaction)`

–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å—É–º–º—ã —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –≤ —Ä—É–±–ª—è—Ö. 

### üî∏ Read Transactions 

`read_transactions_from_csv(csv_data)`

–°—á–∏—Ç—ã–≤–∞–µ—Ç —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –∏–∑ CSV-—Ñ–∞–π–ª–∞ –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ —Å–ª–æ–≤–∞—Ä–µ–π. 

`read_transactions_from_excel(excel_dir)`

–°—á–∏—Ç—ã–≤–∞–µ—Ç —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –∏–∑ EXCEL-—Ñ–∞–π–ª–∞ –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ —Å–ª–æ–≤–∞—Ä–µ–π.

### üî∏ Actions with Bank Operations

`process_bank_search(bank_operations, search)`

–ò—â–µ—Ç –æ–ø–µ—Ä–∞—Ü–∏–∏ –ø–æ –∫–ª—é—á–µ–≤–æ–º—É —Å–ª–æ–≤—É.

`process_bank_operations(bank_operations, unique_categories)`

–§–æ—Ä–º–∏—Ä—É–µ—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º.

### üî∏ Main 

` print_transactions(result)`

–í—ã–≤–æ–¥–∏—Ç –æ—Ç—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é.

`main()`
–ó–∞–ø—É—Å–∫–∞–µ—Ç –æ—Å–Ω–æ–≤–Ω–æ–π —Å—Ü–µ–Ω–∞—Ä–∏–π —Ä–∞–±–æ—Ç—ã –ø—Ä–æ–≥—Ä–∞–º–º—ã.


## –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏ –æ—Å—É—â–µ—Å—Ç–≤–ª—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ Poetry.
–§–∞–π–ª –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏: `pyproject.toml` 


## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–í –ø—Ä–æ–µ–∫—Ç–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ñ—Ä–µ–π–º–≤–æ—Ä–∫ pytest.

–ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤:
```bash
pytest tests/ -v
```

## –ê–≤—Ç–æ—Ä
[–ö—Å–µ–Ω–∏—è](https://github.com/kshaab)

## –õ–∏—Ü–µ–Ω–∑–∏—è
–ü—Ä–æ–µ–∫—Ç —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è–µ—Ç—Å—è –≤ —É—á–µ–±–Ω—ã—Ö —Ü–µ–ª—è—Ö.
